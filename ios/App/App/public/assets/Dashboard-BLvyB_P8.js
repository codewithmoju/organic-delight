var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,l=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&n(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&n(e,a,t[a]);return e},o=(e,s)=>t(e,a(s)),c=(e,t,a)=>new Promise((s,i)=>{var r=e=>{try{l(a.next(e))}catch(t){i(t)}},n=e=>{try{l(a.throw(e))}catch(t){i(t)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,n);l((a=a.apply(e,t)).next())});import{j as d,m,T as x,v as u,w as p,x as h,P as y,l as f,y as g,z as j,D as v,C as b,c as w,H as N,I as k,J as S,S as C}from"./ui-vendor-xs3J0kw7.js";import{r as A}from"./react-vendor-BVrHFBWf.js";import{f as O,u as L}from"./utils-vendor-DglL0U6P.js";import{getItems as P}from"./items-jQwjfGOh.js";import{g as I}from"./transactions-Dil5G5Bn.js";import{g as T,a as F}from"./dashboard-D4Cue7Qt.js";import{e as z,b as E,u as H}from"./index-CKK7GlfE.js";import{R as D,B as M,C as q,X as $,Y as K,T as R,a as W,L as V,b as _}from"./chart-vendor-BwNApLFi.js";import{d as U}from"./debounce-DcMPylXs.js";import{f as G}from"./notifications-tOheaLyS.js";import{C as X}from"./ContextualLoader-DUjmIhSg.js";import{u as J}from"./router-vendor-DDng8bu2.js";import"./firebase-vendor-Xl_GeJX1.js";import"./capacitor-vendor-Be0kW8mJ.js";function Y({title:e,value:t,icon:a,trend:s,delay:i=0}){return d.jsx(m.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:i,ease:"easeOut"},whileHover:{y:-4,scale:1.02},className:"card-dark p-4 sm:p-6 group cursor-pointer",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-400 mb-1 truncate",children:e}),d.jsx(m.p,{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white",initial:{scale:.8},animate:{scale:1},transition:{delay:i+.1,duration:.3,ease:"easeOut"},children:t}),s&&d.jsxs(m.div,{className:"flex items-center mt-1 sm:mt-2 text-xs sm:text-sm font-medium "+(s.value>=0?"text-success-400":"text-error-400"),initial:{opacity:0},animate:{opacity:1},transition:{delay:i+.2,duration:.3},children:[s.value>=0?d.jsx(x,{className:"w-4 h-4 mr-1"}):d.jsx(u,{className:"w-4 h-4 mr-1"}),d.jsxs("span",{className:"truncate",children:[Math.abs(s.value),"% ",s.label]})]})]}),d.jsx(m.div,{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary-500/20 to-accent-500/20 text-primary-400 group-hover:from-primary-500/30 group-hover:to-accent-500/30 transition-all duration-300 flex-shrink-0",whileHover:{rotate:360},transition:{duration:.4,ease:"easeInOut"},children:a})]})})}function B({variant:e="button",className:t=""}){const{startTour:a}=z();return"card"===e?d.jsxs("div",{className:`btn-secondary p-4 sm:p-6 rounded-xl text-center flex flex-col items-center gap-2 sm:gap-3 min-h-[120px] sm:min-h-[140px] cursor-pointer ${t}`,onClick:a,children:[d.jsx(p,{className:"w-6 h-6 sm:w-8 sm:h-8"}),d.jsx("span",{className:"text-base sm:text-lg font-semibold",children:"Take the App Tour"}),d.jsx("span",{className:"text-xs sm:text-sm text-gray-400",children:"Learn how to use StockSuite in just 2 minutes"})]}):d.jsxs("button",{onClick:a,className:`btn-primary flex items-center gap-2 ${t}`,children:[d.jsx(p,{className:"w-4 h-4"}),"Start Tour"]})}function Q({data:e}){const t=({active:e,payload:t,label:a})=>e&&t&&t.length?d.jsxs("div",{className:"glass-effect p-3 rounded-lg border border-dark-600/50",children:[d.jsx("p",{className:"text-gray-200 font-medium",children:a}),d.jsxs("p",{className:"text-primary-400",children:["Quantity: ",t[0].value]})]}):null;return d.jsxs("div",{className:"p-4 sm:p-6",children:[d.jsxs(m.h3,{initial:{opacity:0},animate:{opacity:1},className:"text-lg sm:text-xl font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[d.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-primary-500 to-accent-500 rounded-full mr-3"}),"Inventory Levels"]}),d.jsx(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"h-48 sm:h-64 lg:h-80 xl:h-96",children:d.jsx(D,{width:"100%",height:"100%",children:d.jsxs(M,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[d.jsx(q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),d.jsx($,{dataKey:"name",stroke:"#9CA3AF",fontSize:10,tick:{fill:"#9CA3AF"},interval:0,angle:-45,textAnchor:"end",height:60}),d.jsx(K,{stroke:"#9CA3AF",fontSize:10,tick:{fill:"#9CA3AF"}}),d.jsx(R,{content:d.jsx(t,{})}),d.jsx(W,{dataKey:"quantity",fill:"url(#colorGradient)",radius:[4,4,0,0]}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),d.jsx("stop",{offset:"100%",stopColor:"#d946ef"})]})})]})})})]})}function Z({items:e}){return 0===e.length?null:d.jsx(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"rounded-xl bg-gradient-to-r from-warning-500/10 to-error-500/10 border border-warning-500/20 p-4 sm:p-6",children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(m.div,{className:"flex-shrink-0",animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5,repeat:1/0,repeatDelay:3},children:d.jsx(h,{className:"h-6 w-6 text-warning-400"})}),d.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-warning-300 mb-3",children:"Low Stock Alert"}),d.jsx("div",{className:"space-y-2 sm:space-y-3",children:e.map((e,t)=>d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-3 rounded-lg bg-dark-800/50 border border-dark-700/50",children:[d.jsxs("div",{className:"flex items-center flex-1",children:[d.jsx(y,{className:"w-4 h-4 text-gray-400 mr-3"}),d.jsx("span",{className:"text-gray-200 font-medium text-sm sm:text-base",children:e.name})]}),d.jsxs("div",{className:"text-right flex-shrink-0",children:[d.jsxs("span",{className:"text-warning-400 font-semibold text-sm sm:text-base",children:[e.quantity," units"]}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Reorder at ",e.reorder_point]})]})]},e.name))})]})]})})}function ee({transactions:e}){return d.jsxs("div",{className:"p-4 sm:p-6",children:[d.jsxs(m.h3,{initial:{opacity:0},animate:{opacity:1},className:"text-lg sm:text-xl font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[d.jsx(f,{className:"w-5 h-5 mr-3 text-primary-400"}),"Recent Transactions"]}),d.jsx("div",{className:"space-y-2 sm:space-y-3",children:0===e.length?d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-6 sm:py-8 text-gray-400",children:"No recent transactions"}):e.map((e,t)=>{var a;return d.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},whileHover:{scale:1.02,x:4},className:"flex items-center justify-between p-3 sm:p-4 rounded-lg bg-dark-800/30 border border-dark-700/30 hover:border-primary-500/30 transition-all duration-200 w-full",children:[d.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[d.jsx("div",{className:"p-2 rounded-lg "+("in"===e.type?"bg-success-500/20 text-success-400":"bg-error-500/20 text-error-400"),children:"in"===e.type?d.jsx(g,{className:"w-4 h-4"}):d.jsx(j,{className:"w-4 h-4"})}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"text-gray-200 font-medium text-sm sm:text-base truncate",children:null==(a=e.item)?void 0:a.name}),d.jsx("p",{className:"text-xs text-gray-500",children:O(e.created_at||new Date,"MMM d, HH:mm")})]})]}),d.jsxs("div",{className:"text-right flex-shrink-0",children:[d.jsxs("span",{className:`font-semibold ${"in"===e.type?"text-success-400":"text-error-400"} text-sm sm:text-base`,children:["in"===e.type?"+":"-",Math.abs(e.quantity_changed)]}),d.jsx("p",{className:"text-xs text-gray-500",children:"in"===e.type?"Stock In":"Stock Out"})]})]},e.id)})})]})}function te({title:e,value:t,icon:a,color:s,delay:i=0,isLoading:r=!1}){const n={primary:{bg:"from-primary-500/20 to-primary-600/20",text:"text-primary-400",border:"border-primary-500/30"},success:{bg:"from-success-500/20 to-success-600/20",text:"text-success-400",border:"border-success-500/30"},warning:{bg:"from-warning-500/20 to-warning-600/20",text:"text-warning-400",border:"border-warning-500/30"},error:{bg:"from-error-500/20 to-error-600/20",text:"text-error-400",border:"border-error-500/30"}};return d.jsx(m.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:i,ease:"easeOut"},whileHover:{y:-4,scale:1.02},className:`card-dark p-4 sm:p-6 group cursor-pointer border ${n[s].border} hover:${n[s].border}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-400 mb-2 truncate",children:e}),r?d.jsx("div",{className:"h-8 sm:h-10 bg-gray-700 rounded animate-pulse"}):d.jsx(m.p,{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white",initial:{scale:.8},animate:{scale:1},transition:{delay:i+.1,duration:.3,ease:"easeOut"},children:t})]}),d.jsx(m.div,{className:`flex h-12 w-12 sm:h-14 sm:w-14 items-center justify-center rounded-xl bg-gradient-to-br ${n[s].bg} ${n[s].text} group-hover:scale-110 transition-all duration-300 flex-shrink-0`,whileHover:{rotate:360},transition:{duration:.4,ease:"easeInOut"},children:d.jsx(a,{className:"h-6 w-6 sm:h-7 sm:w-7"})})]})})}const ae=[{value:"today",label:"Today",description:"Current day"},{value:"this-week",label:"Last 7 Days",description:"Past week"},{value:"this-month",label:"Last 30 Days",description:"Past month"},{value:"last-3-months",label:"Last 3 Months",description:"Past quarter"},{value:"last-6-months",label:"Last 6 Months",description:"Past 6 months"},{value:"this-year",label:"Last Year",description:"Past 12 months"}];function se({selectedPeriod:e,onPeriodChange:t,isLoading:a=!1}){const[s,i]=A.useState(!1),r=ae.find(t=>t.value===e)||ae[2];return d.jsxs("div",{className:"relative",children:[d.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(!s),disabled:a,className:"w-full sm:w-auto min-w-[200px] flex items-center justify-between px-4 py-3 rounded-xl bg-dark-700/50 border border-dark-600/50 hover:border-primary-500/50 transition-all duration-200 "+(a?"opacity-50 cursor-not-allowed":""),style:{transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",touchAction:"manipulation"},"aria-expanded":s,"aria-haspopup":"listbox","aria-label":"Select time period",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-primary-500/20 text-primary-400",children:a?d.jsx("div",{className:"w-4 h-4 border-2 border-primary-400 border-t-transparent rounded-full animate-spin"}):d.jsx(v,{className:"w-4 h-4"})}),d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"text-white font-semibold text-sm",children:r.label}),d.jsx("div",{className:"text-gray-400 text-xs",children:r.description})]})]}),d.jsx(b,{className:"w-5 h-5 text-gray-400 transition-transform duration-200 "+(s?"rotate-180":"")})]}),d.jsx(w,{children:s&&d.jsxs(d.Fragment,{children:[d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:()=>i(!1)}),d.jsxs(m.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-dark-800 border border-dark-600/50 rounded-xl shadow-dark-lg z-50 overflow-hidden",role:"listbox","aria-label":"Time period options",children:[d.jsx("div",{className:"p-3 border-b border-dark-700/50",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(f,{className:"w-4 h-4 text-primary-400"}),d.jsx("span",{className:"text-sm font-medium text-white",children:"Select Time Period"})]})}),d.jsx("div",{className:"max-h-64 overflow-y-auto",children:ae.map((a,s)=>d.jsxs(m.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*s},whileHover:{backgroundColor:"rgba(51, 65, 85, 0.5)"},onClick:()=>(e=>{t(e),i(!1)})(a.value),className:"w-full flex items-center justify-between p-4 text-left transition-all duration-200 "+(e===a.value?"bg-primary-500/10 text-primary-400 border-l-4 border-primary-500":"text-gray-300 hover:text-white"),role:"option","aria-selected":e===a.value,children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:a.label}),d.jsx("div",{className:"text-sm opacity-75",children:a.description})]}),e===a.value&&d.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"w-2 h-2 bg-primary-500 rounded-full"})]},a.value))}),d.jsx("div",{className:"p-3 border-t border-dark-700/50 bg-dark-800/50",children:d.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-3 rounded-lg bg-dark-700/50 text-gray-300 hover:bg-dark-600/50 hover:text-white transition-all duration-200 text-center",onClick:()=>{i(!1),toast.info("Custom date range coming soon!")},children:[d.jsx(v,{className:"w-4 h-4 mx-auto mb-1"}),d.jsx("span",{className:"text-sm font-medium",children:"Custom Date Range"})]})})]})]})})]})}function ie({data:e,type:t,title:a,isLoading:s=!1}){const i=({active:e,payload:t,label:a})=>e&&t&&t.length?d.jsxs("div",{className:"glass-effect p-4 rounded-lg border border-dark-600/50 min-w-[200px]",children:[d.jsx("p",{className:"text-gray-200 font-medium mb-2",children:a}),t.map((e,t)=>d.jsxs("p",{className:"text-sm "+(e.dataKey.includes("revenue")?"text-success-400":"text-primary-400"),children:[e.name,": ",e.value]},t))]}):null;return s?d.jsx("div",{className:"card-dark p-4 sm:p-6",children:d.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[d.jsx("div",{className:"h-6 bg-gray-700 rounded mb-6 w-1/3 animate-pulse"}),d.jsx("div",{className:"h-64 sm:h-80 bg-gray-700 rounded animate-pulse"})]})}):d.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,ease:"easeOut"},className:"card-dark p-4 sm:p-6",children:[d.jsxs(m.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1,duration:.3},className:"text-lg sm:text-xl font-semibold text-white mb-4 sm:mb-6 flex items-center",children:[d.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-primary-500 to-accent-500 rounded-full mr-3"}),a]}),d.jsx(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.3},className:"h-64 sm:h-80 w-full",children:d.jsx(D,{width:"100%",height:"100%",children:"bar"===t?d.jsxs(M,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[d.jsx(q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),d.jsx($,{dataKey:"period",stroke:"#9CA3AF",fontSize:10,tick:{fill:"#9CA3AF"}}),d.jsx(K,{stroke:"#9CA3AF",fontSize:10,tick:{fill:"#9CA3AF"}}),d.jsx(R,{content:d.jsx(i,{})}),d.jsx(W,{dataKey:"stockIn",name:"Stock In",fill:"#22c55e",radius:[2,2,0,0]}),d.jsx(W,{dataKey:"stockOut",name:"Stock Out",fill:"#ef4444",radius:[2,2,0,0]})]}):d.jsxs(V,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[d.jsx(q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),d.jsx($,{dataKey:"period",stroke:"#9CA3AF",fontSize:10,tick:{fill:"#9CA3AF"}}),d.jsx(K,{stroke:"#9CA3AF",fontSize:10,tick:{fill:"#9CA3AF"}}),d.jsx(R,{content:d.jsx(i,{})}),d.jsx(_,{type:"monotone",dataKey:"revenueIn",name:"Revenue In",stroke:"#22c55e",strokeWidth:3,dot:{fill:"#22c55e",strokeWidth:2,r:4}}),d.jsx(_,{type:"monotone",dataKey:"revenueOut",name:"Revenue Out",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})})]})}const re=A.memo(({children:e,className:t="",delay:a=0,hover:s=!0})=>{const{getAnimationVariants:i,shouldReduceAnimations:r}=function(){const[e,t]=A.useState({fps:60,memoryUsage:0,isLowEndDevice:!1,connectionSpeed:"unknown"}),[a,s]=A.useState(!1);A.useEffect(()=>{(()=>{const e=navigator.hardwareConcurrency<=2||navigator.deviceMemory<=2||/Android.*Chrome\/[0-5]/.test(navigator.userAgent)||/iPhone.*OS [0-9]_/.test(navigator.userAgent)||window.innerWidth<=768,a=navigator.connection;let i="unknown";a&&("2g"===a.effectiveType||"slow-2g"===a.effectiveType?i="slow":"4g"!==a.effectiveType&&"3g"!==a.effectiveType||(i="fast"));const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches;t(t=>o(l({},t),{isLowEndDevice:e,connectionSpeed:i})),s(e||r)})()},[]),A.useEffect(()=>{let e,a=0,i=performance.now();const r=()=>{a++;const n=performance.now();if(n>=i+1e3){const e=Math.round(1e3*a/(n-i));t(t=>o(l({},t),{fps:e})),e<30&&s(!0),a=0,i=n}e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>cancelAnimationFrame(e)},[]),A.useEffect(()=>{const e=setInterval(()=>{if("memory"in performance){const e=performance.memory.usedJSHeapSize/1048576;t(t=>o(l({},t),{memoryUsage:e}))}},5e3);return()=>clearInterval(e)},[]);const i=A.useCallback(e=>{if(a)return{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1}};switch(e){case"slide":return{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:window.innerWidth<=768?.2:.3,ease:[.25,.46,.45,.94]}};case"fade":return{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:window.innerWidth<=768?.15:.2}};case"scale":return{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:window.innerWidth<=768?.2:.25,ease:"easeOut"}};default:return{}}},[a]),r=A.useMemo(()=>U(()=>{window.dispatchEvent(new Event("optimized-resize"))},250),[]);return A.useEffect(()=>(window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)),[r]),{metrics:e,shouldReduceAnimations:a,getAnimationVariants:i,isLowEndDevice:e.isLowEndDevice,connectionSpeed:e.connectionSpeed}}(),n=i("slide");return r?d.jsx("div",{className:`card-dark ${t}`,children:e}):d.jsx(m.div,o(l({},n),{transition:o(l({},n.transition),{delay:a}),whileHover:s?n.whileHover:void 0,className:`card-dark ${t}`,style:{willChange:"transform, opacity",backfaceVisibility:"hidden",transform:"translate3d(0, 0, 0)"},children:e}))});re.displayName="OptimizedAnimatedCard";const ne=["Initializing application...","Loading your data...","Setting up workspace...","Preparing dashboard...","Almost ready...","Loading complete!"];function le({isLoading:e,title:t="StockSuite",subtitle:a="Professional Inventory Management",progress:s=0,messages:i=ne,variant:r="spinner"}){return d.jsx(w,{children:e&&d.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-dark-950 via-dark-900 to-dark-950",children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx(m.div,{animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-72 h-72 bg-primary-500/10 rounded-full blur-3xl"}),d.jsx(m.div,{animate:{scale:[1.1,1,1.1],opacity:[.2,.4,.2]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-500/10 rounded-full blur-3xl"})]}),d.jsxs("div",{className:"relative z-10 text-center max-w-md mx-auto px-6",children:[d.jsxs(m.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"mb-8",children:[d.jsx("div",{className:"flex items-center justify-center mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx(y,{className:"w-16 h-16 text-primary-500"}),d.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-accent-500 rounded-full border-2 border-dark-900"})]})}),d.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:t}),d.jsx("p",{className:"text-gray-400 text-lg",children:a})]}),d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:d.jsx(E,{size:"lg",color:"primary",variant:r,messages:i,messageInterval:2500,showProgress:"progress"===r,progress:s})}),"progress"!==r&&s>0&&d.jsxs(m.div,{initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{delay:.5,duration:.4},className:"mt-8 w-full max-w-xs mx-auto",children:[d.jsx("div",{className:"w-full bg-dark-700 rounded-full h-2",children:d.jsx(m.div,{initial:{width:0},animate:{width:`${s}%`},transition:{duration:.5,ease:"easeOut"},className:"bg-gradient-to-r from-primary-500 to-accent-500 h-2 rounded-full relative overflow-hidden",children:d.jsx(m.div,{animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent"})})}),d.jsxs("div",{className:"text-center mt-2 text-sm text-gray-400",children:[Math.round(s),"% complete"]})]}),d.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.4},className:"mt-8 p-4 bg-dark-800/50 rounded-lg border border-dark-700/50",children:d.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"ðŸ’¡ Tip: Use the search function to quickly find items in your inventory"})})]})]})})}function oe(){const{t:e}=H(),t=J(),[a,s]=A.useState("this-month"),[i,r]=A.useState(null),[n,l]=A.useState([]),[o,u]=A.useState(null),[p,f]=A.useState([]),[g,j]=A.useState([]),[v,b]=A.useState(!0),[w,O]=A.useState(!1),[z,E]=A.useState(null),[D,M]=A.useState(0),[q,$]=A.useState("Initializing...");function K(){return c(this,null,function*(){v||O(!0);try{const[e,t]=yield Promise.all([T(a),F(a)]);r(e),l(t)}catch(e){L.error("Failed to load metrics data")}finally{O(!1)}})}A.useEffect(()=>{!function(){c(this,null,function*(){M(10),$("Fetching dashboard data...");try{M(30),$("Loading inventory items...");const[e,t]=yield Promise.all([P(),I(5)]);M(60),$("Calculating metrics...");const a=e.items||[],s=a.reduce((e,t)=>e+t.quantity*t.unit_price,0),i=a.filter(e=>e.quantity<=e.reorder_point),r=a.filter(e=>0===e.quantity);u({totalItems:a.length,totalValue:s,lowStockCount:i.length,outOfStockCount:r.length,items:a.slice(0,10)}),f(i),j(t),E(null),M(80),$("Preparing dashboard..."),yield K(),M(100),$("Dashboard ready!")}catch(e){E("Unable to load dashboard data. Please try again later."),L.error("Failed to load dashboard data")}finally{b(!1)}})}()},[]),A.useEffect(()=>{K()},[a]);const R=A.useMemo(()=>{var e;return(null==(e=null==o?void 0:o.items)?void 0:e.map(e=>({name:e.name.length>10?e.name.substring(0,10)+"...":e.name,quantity:e.quantity})))||[]},[null==o?void 0:o.items]);return z?d.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-center h-full min-h-[60vh]",children:d.jsxs("div",{className:"text-center",children:[d.jsx(h,{className:"w-16 h-16 text-error-500 mx-auto mb-4"}),d.jsx("div",{className:"text-error-400 text-lg font-medium mb-2",children:"Error"}),d.jsx("div",{className:"text-gray-400",children:z})]})}):d.jsxs(d.Fragment,{children:[d.jsx(le,{isLoading:v,progress:D,variant:"progress"}),d.jsx(X,{isLoading:w,context:"dashboard",variant:"overlay"}),d.jsx("div",{className:"space-y-6 sm:space-y-8",children:d.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[d.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"text-center sm:text-left",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gradient mb-2",children:e("dashboard.title")}),d.jsx("p",{className:"text-gray-400 text-base sm:text-lg",children:e("dashboard.subtitle")})]}),d.jsx(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3,duration:.4},className:"w-full sm:w-auto",children:d.jsx(se,{selectedPeriod:a,onPeriodChange:e=>{s(e)},isLoading:w})})]}),d.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 sm:gap-6","data-tour":"dashboard-stats",children:[d.jsx(te,{title:e("dashboard.metrics.totalStockIn"),value:(null==i?void 0:i.totalStockIn)||0,icon:N,color:"success",delay:.2,isLoading:w}),d.jsx(te,{title:e("dashboard.metrics.totalStockOut"),value:(null==i?void 0:i.totalStockOut)||0,icon:k,color:"error",delay:.3,isLoading:w}),d.jsx(te,{title:e("dashboard.metrics.revenueSpent"),value:G((null==i?void 0:i.revenueSpentOnStockIn)||0),icon:S,color:"warning",delay:.4,isLoading:w}),d.jsx(te,{title:e("dashboard.metrics.revenueEarned"),value:G((null==i?void 0:i.revenueEarnedFromStockOut)||0),icon:x,color:"primary",delay:.5,isLoading:w})]}),d.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 sm:gap-6",children:[d.jsx(Y,{title:"Total Items",value:(null==o?void 0:o.totalItems)||0,icon:d.jsx(y,{className:"h-6 w-6"}),delay:.6}),d.jsx(Y,{title:"Total Value",value:G((null==o?void 0:o.totalValue)||0),icon:d.jsx(S,{className:"h-6 w-6"}),delay:.7}),d.jsx(Y,{title:"Low Stock Items",value:(null==o?void 0:o.lowStockCount)||0,icon:d.jsx(C,{className:"h-6 w-6"}),delay:.8}),d.jsx(Y,{title:"Out of Stock",value:(null==o?void 0:o.outOfStockCount)||0,icon:d.jsx(h,{className:"h-6 w-6"}),delay:.9})]}),p.length>0&&d.jsx(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:1,duration:.4},children:d.jsx(Z,{items:p})}),d.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:gap-8 xl:grid-cols-2",children:[d.jsx(ie,{data:n,type:"bar",title:"Stock Movement Trends",isLoading:w}),d.jsx(ie,{data:n,type:"line",title:"Revenue Trends",isLoading:w})]}),d.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:gap-8 xl:grid-cols-2",children:[d.jsx(re,{delay:1,children:d.jsx(Q,{data:R})}),d.jsx(re,{delay:1.1,children:d.jsx(ee,{transactions:g})})]}),d.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.3,duration:.4},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[d.jsx(B,{variant:"card"}),d.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/inventory/items"),className:"btn-primary p-4 sm:p-6 rounded-xl text-center flex flex-col items-center gap-2 sm:gap-3 min-h-[120px] sm:min-h-[140px]",children:[d.jsx(y,{className:"w-6 h-6 sm:w-8 sm:h-8"}),d.jsx("span",{className:"text-base sm:text-lg font-semibold",children:"Add New Product"})]}),d.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/pos"),className:"btn-secondary p-4 sm:p-6 rounded-xl text-center flex flex-col items-center gap-2 sm:gap-3 min-h-[120px] sm:min-h-[140px] sm:col-span-2 lg:col-span-1",children:[d.jsx(C,{className:"w-6 h-6 sm:w-8 sm:h-8"}),d.jsx("span",{className:"text-base sm:text-lg font-semibold",children:"Point of Sale"})]})]})]})})]})}export{oe as default};

var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,i=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&o(e,a,t[a]);if(s)for(var a of s(t))n.call(t,a)&&o(e,a,t[a]);return e},l=(e,s)=>t(e,a(s)),c=(e,t,a)=>new Promise((s,r)=>{var n=e=>{try{i(a.next(e))}catch(t){r(t)}},o=e=>{try{i(a.throw(e))}catch(t){r(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())});import{m as d,q as m,r as u,n as g,w as f,d as h,u as x,x as p,y,b}from"./firebase-vendor-Xl_GeJX1.js";import{d as w}from"./index-CKK7GlfE.js";import{r as v}from"./react-vendor-BVrHFBWf.js";import{d as P}from"./debounce-DcMPylXs.js";import{j as z,m as j,ag as N,ah as k,ai as S,aj as M}from"./ui-vendor-xs3J0kw7.js";function E(){return c(this,null,function*(){const e=d(w,"categories"),t=m(e,u("name")),a=yield g(t),s=[];for(const r of a.docs){const e=i({id:r.id},r.data()),t=d(w,"items"),a=m(t,f("category_id","==",e.id)),n=yield g(a);e.item_count=n.size,s.push(e)}return s})}function C(e){return c(this,null,function*(){const t=d(w,"categories"),a=m(t,f("name","==",e.name.trim()));if(!(yield g(a)).empty)throw new Error("A category with this name already exists");const s=yield p(d(w,"categories"),l(i({},e),{name:e.name.trim(),created_at:new Date,updated_at:new Date}));return l(i({id:s.id},e),{name:e.name.trim(),created_at:new Date,updated_at:new Date})})}function I(e,t){return c(this,null,function*(){if(t.name){const a=d(w,"categories"),s=m(a,f("name","==",t.name.trim()));if((yield g(s)).docs.some(t=>t.id!==e))throw new Error("A category with this name already exists")}const a=h(w,"categories",e),s=l(i(i({},t),t.name&&{name:t.name.trim()}),{updated_at:new Date});return yield x(a,s),function(e){return c(this,null,function*(){const t=h(w,"categories",e),a=yield b(t);if(!a.exists())throw new Error("Category not found");return i({id:a.id},a.data())})}(e)})}function O(e){return c(this,null,function*(){const t=d(w,"items"),a=m(t,f("category_id","==",e));if(!(yield g(a)).empty)throw new Error("Cannot delete category that contains items. Please move or delete all items first.");yield y(h(w,"categories",e))})}function T(e){return c(this,null,function*(){const t=d(w,"items"),a=m(t,f("category_id","==",e));return(yield g(a)).size})}const _={fontSize:"medium",animationsEnabled:!0,contrastMode:"normal",viewMode:"normal",itemsPerPage:25,reducedMotion:!1},D="stocksuite-accessibility-settings";function A(e){const t=document.documentElement;t.setAttribute("data-font-size",e.fontSize),t.setAttribute("data-contrast",e.contrastMode),t.setAttribute("data-view-mode",e.viewMode),t.setAttribute("data-animations",e.animationsEnabled.toString()),e.reducedMotion||!e.animationsEnabled?(t.style.setProperty("--animation-duration","0s"),t.style.setProperty("--transition-duration","0s")):(t.style.removeProperty("--animation-duration"),t.style.removeProperty("--transition-duration"));const a={small:{"--font-size-xs":"0.625rem","--font-size-sm":"0.75rem","--font-size-base":"0.875rem","--font-size-lg":"1rem","--font-size-xl":"1.125rem","--font-size-2xl":"1.25rem","--font-size-3xl":"1.5rem","--font-size-4xl":"1.875rem"},medium:{"--font-size-xs":"0.75rem","--font-size-sm":"0.875rem","--font-size-base":"1rem","--font-size-lg":"1.125rem","--font-size-xl":"1.25rem","--font-size-2xl":"1.5rem","--font-size-3xl":"1.875rem","--font-size-4xl":"2.25rem"},large:{"--font-size-xs":"0.875rem","--font-size-sm":"1rem","--font-size-base":"1.125rem","--font-size-lg":"1.25rem","--font-size-xl":"1.5rem","--font-size-2xl":"1.875rem","--font-size-3xl":"2.25rem","--font-size-4xl":"3rem"},"extra-large":{"--font-size-xs":"1rem","--font-size-sm":"1.125rem","--font-size-base":"1.25rem","--font-size-lg":"1.5rem","--font-size-xl":"1.875rem","--font-size-2xl":"2.25rem","--font-size-3xl":"3rem","--font-size-4xl":"3.75rem"}}[e.fontSize];Object.entries(a).forEach(([e,a])=>{t.style.setProperty(e,a)}),"compact"===e.viewMode?(t.style.setProperty("--spacing-scale","0.75"),t.style.setProperty("--padding-scale","0.8")):(t.style.setProperty("--spacing-scale","1"),t.style.setProperty("--padding-scale","1"))}function G({data:e,defaultItemsPerPage:t=25}){const{settings:a}=function(){const[e,t]=v.useState(_),[a,s]=v.useState(!1);v.useEffect(()=>{try{const e=localStorage.getItem(D);if(e){const a=JSON.parse(e);t(i(i({},_),a))}}catch(e){}},[]),v.useEffect(()=>{A(e)},[e]);const r=v.useCallback(P(e=>{try{localStorage.setItem(D,JSON.stringify(e))}catch(t){}},500),[]),n=v.useCallback((e,a)=>{t(t=>{const s=l(i({},t),{[e]:a});return r(s),s})},[r]),o=v.useCallback(e=>{t(t=>{const a=i(i({},t),e);return r(a),a})},[r]),c=v.useCallback(()=>{t(_),localStorage.removeItem(D),A(_)},[]);return{settings:e,updateSetting:n,updateSettings:o,resetToDefaults:c,isLoading:a}}(),[s,r]=v.useState(1),n=a.itemsPerPage||t;v.useEffect(()=>{r(1)},[e.length,n]);const o=Math.ceil(e.length/n),c=(s-1)*n,d=Math.min(c+n,e.length),m=v.useMemo(()=>e.slice(c,d),[e,c,d]);return{currentPage:s,totalPages:o,itemsPerPage:n,paginatedData:m,goToPage:e=>{const t=Math.max(1,Math.min(e,o));r(t)},nextPage:()=>{s<o&&r(s+1)},prevPage:()=>{s>1&&r(s-1)},goToFirstPage:()=>r(1),goToLastPage:()=>r(o),setItemsPerPage:e=>{},hasNextPage:s<o,hasPrevPage:s>1,startIndex:c+1,endIndex:d,totalItems:e.length}}function H({currentPage:e,totalPages:t,onPageChange:a,hasNextPage:s,hasPrevPage:r,startIndex:n,endIndex:o,totalItems:i,className:l=""}){return t<=1?null:z.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 ${l}`,children:[z.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",z.jsx("span",{className:"font-medium text-white",children:n})," to"," ",z.jsx("span",{className:"font-medium text-white",children:o})," of"," ",z.jsx("span",{className:"font-medium text-white",children:i})," results"]}),z.jsxs("div",{className:"flex items-center space-x-2",children:[z.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(1),disabled:!r,className:"p-2 rounded-lg transition-all duration-200 "+(r?"bg-dark-600/50 text-gray-300 hover:bg-dark-600/70 hover:text-white":"bg-gray-600/30 text-gray-500 cursor-not-allowed"),"aria-label":"Go to first page",children:z.jsx(N,{className:"w-4 h-4"})}),z.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(e-1),disabled:!r,className:"p-2 rounded-lg transition-all duration-200 "+(r?"bg-dark-600/50 text-gray-300 hover:bg-dark-600/70 hover:text-white":"bg-gray-600/30 text-gray-500 cursor-not-allowed"),"aria-label":"Go to previous page",children:z.jsx(k,{className:"w-4 h-4"})}),z.jsx("div",{className:"flex items-center space-x-1",children:(()=>{const a=[],s=[];for(let r=Math.max(2,e-2);r<=Math.min(t-1,e+2);r++)a.push(r);return e-2>2?s.push(1,"..."):s.push(1),s.push(...a),e+2<t-1?s.push("...",t):t>1&&s.push(t),s})().map((t,s)=>z.jsx(j.button,{whileHover:"..."!==t?{scale:1.05}:{},whileTap:"..."!==t?{scale:.95}:{},onClick:()=>"number"==typeof t?a(t):void 0,disabled:"..."===t,className:"min-w-[40px] h-10 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(t===e?"bg-primary-600 text-white shadow-glow":"..."===t?"text-gray-500 cursor-default":"bg-dark-600/50 text-gray-300 hover:bg-dark-600/70 hover:text-white"),"aria-label":"..."===t?void 0:`Go to page ${t}`,"aria-current":t===e?"page":void 0,children:t},s))}),z.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(e+1),disabled:!s,className:"p-2 rounded-lg transition-all duration-200 "+(s?"bg-dark-600/50 text-gray-300 hover:bg-dark-600/70 hover:text-white":"bg-gray-600/30 text-gray-500 cursor-not-allowed"),"aria-label":"Go to next page",children:z.jsx(S,{className:"w-4 h-4"})}),z.jsx(j.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(t),disabled:!s,className:"p-2 rounded-lg transition-all duration-200 "+(s?"bg-dark-600/50 text-gray-300 hover:bg-dark-600/70 hover:text-white":"bg-gray-600/30 text-gray-500 cursor-not-allowed"),"aria-label":"Go to last page",children:z.jsx(M,{className:"w-4 h-4"})})]})]})}export{H as P,T as a,I as b,C as c,O as d,E as g,G as u};

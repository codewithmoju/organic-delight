import{j as e,m as s,k as t,l as a,n as r,h as i,E as l,i as n}from"./ui-vendor-xs3J0kw7.js";import{r as o}from"./react-vendor-BVrHFBWf.js";import{L as c}from"./router-vendor-DDng8bu2.js";import{u as d}from"./utils-vendor-DglL0U6P.js";import{k as m,l as u}from"./firebase-vendor-Xl_GeJX1.js";import{L as x,b as p,c as h}from"./index-CKK7GlfE.js";import"./capacitor-vendor-Be0kW8mJ.js";function y(){const[y,w]=o.useState("request"),[f,j]=o.useState(!1),[v,g]=o.useState(""),[b,N]=o.useState(""),[P,k]=o.useState(""),[S,q]=o.useState(""),[C,R]=o.useState(""),[E,F]=o.useState(!1);function z(e){return s=this,t=null,a=function*(){e.preventDefault(),R(""),j(!0);try{if("request"===y){if(!v)return void R("Email is required");if(!/\S+@\S+\.\S+/.test(v))return void R("Please enter a valid email address");yield m(h,v),w("success"),d.success("Password reset instructions sent to your email")}else if("reset"===y){if(!b)return void R("New password is required");if(b.length<8)return void R("Password must be at least 8 characters");if(b!==P)return void R("Passwords do not match");yield u(h,S,b),w("success"),d.success("Password reset successfully! You can now sign in with your new password.")}}catch(s){"request"===y?"auth/user-not-found"===s.code?R("No account found with this email address"):"auth/invalid-email"===s.code?R("Please enter a valid email address"):d.error("Failed to send reset email. Please try again."):"auth/invalid-action-code"===s.code?R("Invalid or expired reset link. Please request a new one."):"auth/expired-action-code"===s.code?R("Reset link has expired. Please request a new one."):d.error("Failed to reset password. Please try again.")}finally{j(!1)}},new Promise((r,i)=>{var l=s=>{try{o(a.next(s))}catch(e){i(e)}},n=s=>{try{o(a.throw(s))}catch(e){i(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);o((a=a.apply(s,t)).next())});var s,t,a}return o.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("oobCode");e&&(q(e),w("reset"))},[]),e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-dark-950 via-dark-900 to-dark-950 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-primary-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-500/10 rounded-full blur-3xl"})]}),e.jsx(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-lg relative z-10",children:e.jsxs("div",{className:"glass-effect p-8 lg:p-10 rounded-2xl border border-dark-700/50 shadow-dark-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(x,{size:"lg",animated:!0}),e.jsx(s.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 text-3xl lg:text-4xl font-bold text-white",children:"request"===y?"Reset your password":"reset"===y?"Set new password":"Password Reset Complete"}),e.jsx(s.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-2 text-gray-400 text-lg",children:"request"===y?"Enter your email to receive reset instructions":"reset"===y?"Enter your new password below":"Your password has been successfully reset"})]}),"success"===y?e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-success-500/20 mb-6",children:e.jsx(t,{className:"h-8 w-8 text-success-400"})}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("p",{className:"mb-3 font-medium text-white text-xl",children:"success"===y&&v?"Check your email":"Password Reset Complete"}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-6 text-lg",children:["We've sent password reset instructions to ",e.jsx("strong",{children:v})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Didn't receive the email? Check your spam folder."}),e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-6",children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),"Reset link expires in 1 hour"]})]}),!v&&e.jsx("p",{className:"mb-6 text-lg",children:"You can now sign in with your new password."})]}),e.jsx("div",{className:"mt-8",children:e.jsx(s.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(c,{to:"/login",className:"btn-primary inline-flex items-center justify-center px-6 py-4 text-lg font-semibold w-full sm:w-auto",children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Return to login"]})})})]}):"request"===y?e.jsxs("form",{className:"space-y-8",onSubmit:z,children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("label",{htmlFor:"email",className:"block text-base font-medium text-gray-300 mb-3",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:v,onChange:e=>g(e.target.value),required:!0,className:"w-full input-dark input-large "+(C?"ring-error-500 border-error-500":""),placeholder:"Enter your email address"}),C&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-2 flex items-center text-sm text-error-400",children:[e.jsx(i,{className:"h-4 w-4 mr-1"}),C]})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:f,className:"btn-primary w-full flex items-center justify-center gap-2 py-4 text-lg font-semibold",children:f?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",color:"white"}),"Sending..."]}):"Send reset instructions"})})]}):e.jsxs("form",{className:"space-y-8",onSubmit:z,children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-base font-medium text-gray-300 mb-3",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"newPassword",name:"newPassword",type:E?"text":"password",value:b,onChange:e=>N(e.target.value),required:!0,className:"w-full input-dark input-large pr-12 "+(C?"ring-error-500 border-error-500":""),placeholder:"Enter your new password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-4",onClick:()=>F(!E),children:E?e.jsx(l,{className:"h-6 w-6 text-gray-400 hover:text-gray-200"}):e.jsx(n,{className:"h-6 w-6 text-gray-400 hover:text-gray-200"})})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-base font-medium text-gray-300 mb-3",children:"Confirm New Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:P,onChange:e=>k(e.target.value),required:!0,className:"w-full input-dark input-large "+(C?"ring-error-500 border-error-500":""),placeholder:"Confirm your new password"}),C&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-2 flex items-center text-sm text-error-400",children:[e.jsx(i,{className:"h-4 w-4 mr-1"}),C]})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:f,className:"btn-primary w-full flex items-center justify-center gap-2 py-4 text-lg font-semibold",children:f?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"sm",color:"white"}),"Resetting Password..."]}):"Reset Password"})})]}),e.jsxs(s.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-8 text-center text-base text-gray-400",children:["Remember your password?"," ",e.jsx(c,{to:"/login",className:"font-semibold text-primary-400 hover:text-primary-300 transition-colors duration-200 text-lg",children:"Sign in"})]})]})})]})}export{y as default};

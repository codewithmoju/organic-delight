var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))i.call(a,t)&&n(e,t,a[t]);return e},o=(e,l)=>a(e,t(l));import{j as m,m as d,U as c,t as p,ab as u,ak as y,p as x,ae as h}from"./ui-vendor-xs3J0kw7.js";import{r as f}from"./react-vendor-BVrHFBWf.js";import{u as j}from"./utils-vendor-DglL0U6P.js";import{a as b,f as v,b as g}from"./index-CKK7GlfE.js";import{A as N}from"./AnimatedCard-D-urSkxU.js";import"./capacitor-vendor-Be0kW8mJ.js";import"./router-vendor-DDng8bu2.js";import"./firebase-vendor-Xl_GeJX1.js";function w(){const[e,a]=f.useState(!1),[t,l]=f.useState({full_name:"",phone:"",company:"",address:""}),[s,i]=f.useState(!1),n=b(f.useCallback(e=>e.profile,[])),w=b(f.useCallback(e=>e.setProfile,[])),k=f.useMemo(()=>n?{id:n.id,full_name:n.full_name||"",email:n.email||"",phone:n.phone||"",company:n.company||"",address:n.address||""}:null,[null==n?void 0:n.id,null==n?void 0:n.full_name,null==n?void 0:n.email,null==n?void 0:n.phone,null==n?void 0:n.company,null==n?void 0:n.address]);f.useEffect(()=>{k&&(l({full_name:k.full_name,phone:k.phone,company:k.company,address:k.address}),i(!1))},[null==k?void 0:k.id]);const C=f.useCallback((e,a)=>{l(t=>{const l=o(r({},t),{[e]:a});if(k){const e=Object.keys(l).some(e=>l[e]!==k[e]);i(e)}return l})},[k]),P=f.useCallback(e=>{return l=this,n=null,m=function*(){if(e.preventDefault(),(null==k?void 0:k.id)&&s){a(!0);try{yield v(k.id,t),w(e=>e?o(r(r({},e),t),{updated_at:new Date}):e),i(!1),j.success("Profile updated successfully")}catch(l){j.error("Failed to update profile")}finally{a(!1)}}},new Promise((a,t)=>{var s=a=>{try{r(m.next(a))}catch(e){t(e)}},i=a=>{try{r(m.throw(a))}catch(e){t(e)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);r((m=m.apply(l,n)).next())});var l,n,m},[null==k?void 0:k.id,t,s,w]);return k?m.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[m.jsxs(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gradient mb-2",children:"Profile Settings"}),m.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Manage your personal information and account details"})]}),m.jsx(N,{delay:.1,children:m.jsxs("div",{className:"p-6 sm:p-8",children:[m.jsxs("div",{className:"flex items-center mb-8",children:[m.jsx("div",{className:"p-3 rounded-lg bg-primary-500/20 text-primary-400 mr-4",children:m.jsx(c,{className:"w-6 h-6"})}),m.jsx("h3",{className:"text-xl font-semibold text-white",children:"Personal Information"})]}),m.jsxs("form",{onSubmit:P,className:"space-y-6",children:[m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[m.jsxs("label",{htmlFor:"fullName",className:"block text-base font-medium text-gray-300 mb-3",children:[m.jsx(c,{className:"w-4 h-4 inline mr-2"}),"Full Name"]}),m.jsx("input",{type:"text",id:"fullName",value:t.full_name,onChange:e=>C("full_name",e.target.value),required:!0,className:"w-full input-dark input-large",placeholder:"Enter your full name"})]}),m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[m.jsxs("label",{htmlFor:"email",className:"block text-base font-medium text-gray-300 mb-3",children:[m.jsx(p,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),m.jsx("input",{type:"email",id:"email",value:k.email,disabled:!0,className:"w-full input-dark input-large opacity-50 cursor-not-allowed"}),m.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Email cannot be changed. Contact support if you need to update your email."})]}),m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[m.jsxs("label",{htmlFor:"phone",className:"block text-base font-medium text-gray-300 mb-3",children:[m.jsx(u,{className:"w-4 h-4 inline mr-2"}),"Phone Number"]}),m.jsx("input",{type:"tel",id:"phone",value:t.phone,onChange:e=>C("phone",e.target.value),className:"w-full input-dark input-large",placeholder:"Enter phone number"})]}),m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[m.jsxs("label",{htmlFor:"company",className:"block text-base font-medium text-gray-300 mb-3",children:[m.jsx(y,{className:"w-4 h-4 inline mr-2"}),"Company"]}),m.jsx("input",{type:"text",id:"company",value:t.company,onChange:e=>C("company",e.target.value),className:"w-full input-dark input-large",placeholder:"Enter company name"})]}),m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[m.jsxs("label",{htmlFor:"address",className:"block text-base font-medium text-gray-300 mb-3",children:[m.jsx(x,{className:"w-4 h-4 inline mr-2"}),"Address"]}),m.jsx("textarea",{id:"address",rows:3,value:t.address,onChange:e=>C("address",e.target.value),className:"w-full input-dark input-large resize-none",placeholder:"Enter your address"})]}),m.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"pt-6",children:m.jsx(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:e||!s,className:"btn-primary w-full flex items-center justify-center gap-2 py-4 text-lg "+(s?"":"opacity-50 cursor-not-allowed"),children:e?m.jsxs(m.Fragment,{children:[m.jsx(g,{size:"sm",color:"white"}),"Saving..."]}):m.jsxs(m.Fragment,{children:[m.jsx(h,{className:"w-4 h-4"}),s?"Save Changes":"No Changes"]})})})]})]})})]}):m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx(g,{size:"lg",text:"Loading profile..."})})}export{w as default};

var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,l=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&n(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&n(e,a,t[a]);return e},o=(e,s)=>t(e,a(s)),c=(e,t,a)=>new Promise((s,r)=>{var i=e=>{try{l(a.next(e))}catch(t){r(t)}},n=e=>{try{l(a.throw(e))}catch(t){r(t)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,n);l((a=a.apply(e,t)).next())});import{j as m,m as d,h as x,W as p,c as u,F as y,af as h,Q as g,P as j}from"./ui-vendor-xs3J0kw7.js";import{r as f}from"./react-vendor-BVrHFBWf.js";import{u as b}from"./utils-vendor-DglL0U6P.js";import{u as v,g as N,a as w,P as C,b as P,c as k,d as O}from"./PaginationControls-DhISIAKu.js";import{b as D}from"./index-CKK7GlfE.js";import{A as S}from"./AnimatedCard-D-urSkxU.js";import{C as F}from"./ContextualLoader-DUjmIhSg.js";import"./firebase-vendor-Xl_GeJX1.js";import"./debounce-DcMPylXs.js";import"./capacitor-vendor-Be0kW8mJ.js";import"./router-vendor-DDng8bu2.js";function I({initialData:e,onSubmit:t,onCancel:a}){const[s,r]=f.useState(!1),[i,n]=f.useState({});return m.jsxs("form",{onSubmit:function(a){return c(this,null,function*(){a.preventDefault(),n({}),r(!0);try{const s=new FormData(a.currentTarget),r=s.get("name").trim(),i=s.get("description").trim(),l={};if(r?r.length<2?l.name="Category name must be at least 2 characters":r.length>50&&(l.name="Category name must be 50 characters or less"):l.name="Category name is required",i?i.length<5&&(l.description="Description must be at least 5 characters"):l.description="Description is required",Object.keys(l).length>0)return void n(l);yield t({name:r,description:i,created_by:"current-user"}),b.success(`Category ${e?"updated":"created"} successfully`)}catch(s){s.message.includes("already exists")?n({name:s.message}):b.error(`Failed to ${e?"update":"create"} category`)}finally{r(!1)}})},className:"space-y-6 sm:space-y-8",children:[m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[m.jsx("label",{htmlFor:"name",className:"block text-base font-medium text-gray-300 mb-3",children:"Category Name *"}),m.jsx("input",{type:"text",name:"name",id:"name",defaultValue:null==e?void 0:e.name,required:!0,maxLength:50,className:"w-full input-dark input-large "+(i.name?"ring-error-500 border-error-500":""),placeholder:"Enter category name (e.g., Electronics, Clothing)"}),i.name&&m.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-2 flex items-center text-sm text-error-400",children:[m.jsx(x,{className:"h-4 w-4 mr-1"}),i.name]})]}),m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[m.jsx("label",{htmlFor:"description",className:"block text-base font-medium text-gray-300 mb-3",children:"Description *"}),m.jsx("textarea",{name:"description",id:"description",rows:4,defaultValue:(null==e?void 0:e.description)||"",required:!0,maxLength:500,className:"w-full input-dark input-large resize-none "+(i.description?"ring-error-500 border-error-500":""),placeholder:"Describe what types of items belong in this category..."}),i.description&&m.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-2 flex items-center text-sm text-error-400",children:[m.jsx(x,{className:"h-4 w-4 mr-1"}),i.description]})]}),m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 pt-6 sm:pt-8 border-t border-dark-700/50",children:[m.jsx(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:a,className:"btn-secondary px-6 sm:px-8 py-3 text-base sm:text-lg order-2 sm:order-1",children:"Cancel"}),m.jsx(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:s,className:"btn-primary flex items-center gap-2 min-w-[140px] px-6 sm:px-8 py-3 text-base sm:text-lg order-1 sm:order-2",children:s?m.jsxs(m.Fragment,{children:[m.jsx(D,{size:"sm",color:"white"}),e?"Updating...":"Creating..."]}):(e?"Update":"Create")+" Category"})]})]})}function T(){const[e,t]=f.useState([]),[a,s]=f.useState(null),[r,i]=f.useState(!1),[n,x]=f.useState(!0),D=v({data:e,defaultItemsPerPage:20});function T(){return c(this,null,function*(){try{const e=yield N(),a=yield Promise.all(e.map(e=>c(this,null,function*(){try{const t=yield w(e.id);return o(l({},e),{itemCount:t})}catch(t){return o(l({},e),{itemCount:0})}})));t(a)}catch(e){b.error("Failed to load categories")}finally{x(!1)}})}return f.useEffect(()=>{T()},[]),r?m.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gradient",children:a?"Edit Category":"Add New Category"}),m.jsx("p",{className:"text-gray-400 mt-2",children:a?"Update category information":"Create a new inventory category"})]}),m.jsx(S,{children:m.jsx("div",{className:"p-6",children:m.jsx(I,{initialData:a||void 0,onSubmit:function(e){return c(this,null,function*(){try{a?yield P(a.id,e):yield k(e),yield T(),i(!1),s(null)}catch(t){throw t}})},onCancel:()=>{i(!1),s(null)}})})})]}):m.jsxs("div",{className:"relative",children:[m.jsx(F,{isLoading:n,context:"categories",variant:"overlay"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gradient",children:"Categories"}),m.jsx("p",{className:"text-gray-400 mt-1 text-sm sm:text-base",children:"Organize your inventory with custom categories"})]}),m.jsxs(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>i(!0),className:"btn-primary flex items-center gap-2 w-full sm:w-auto justify-center",children:[m.jsx(p,{className:"h-4 w-4"}),"Add Category"]})]}),m.jsx(d.div,{layout:!0,"data-tour":"categories-grid",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-6 px-2 sm:px-0",children:m.jsx(u,{children:D.paginatedData.map((e,t)=>m.jsxs(d.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{delay:.05*t},whileHover:{y:-8,scale:1.03},className:"card-dark p-4 sm:p-6 group cursor-pointer relative overflow-hidden w-full",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-500/5 to-accent-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary-500/20 to-accent-500/20 group-hover:from-primary-500/30 group-hover:to-accent-500/30 transition-all duration-300",children:m.jsx(y,{className:"w-6 h-6 text-primary-400"})})}),m.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0",children:[m.jsx(d.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{s(e),i(!0)},className:"p-1.5 sm:p-2 rounded-lg bg-primary-500/20 text-primary-400 hover:bg-primary-500/30 transition-colors duration-200",children:m.jsx(h,{className:"h-4 w-4"})}),m.jsx(d.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>function(e){return c(this,null,function*(){if(confirm("Are you sure you want to delete this category?"))try{yield O(e),yield T(),b.success("Category deleted successfully")}catch(t){b.error("Failed to delete category")}})}(e.id),className:"p-1.5 sm:p-2 rounded-lg bg-error-500/20 text-error-400 hover:bg-error-500/30 transition-colors duration-200",children:m.jsx(g,{className:"h-4 w-4"})})]})]}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white group-hover:text-primary-300 transition-colors duration-200 mb-2 truncate",children:e.name}),e.description&&m.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mb-3 sm:mb-4 line-clamp-2",children:e.description}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center text-gray-400 text-xs sm:text-sm",children:[m.jsx(j,{className:"w-4 h-4 mr-1"}),e.itemCount||0," items"]}),m.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full group-hover:scale-150 transition-transform duration-300"})]})]})]})]},e.id))})}),e.length>0&&m.jsx(S,{delay:.2,children:m.jsx("div",{className:"p-4 sm:p-6",children:m.jsx(C,{currentPage:D.currentPage,totalPages:D.totalPages,onPageChange:D.goToPage,hasNextPage:D.hasNextPage,hasPrevPage:D.hasPrevPage,startIndex:D.startIndex,endIndex:D.endIndex,totalItems:D.totalItems})})}),0===e.length&&!n&&m.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-12 sm:py-16 px-4",children:[m.jsx(y,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-400 mb-2",children:"No categories yet"}),m.jsx("p",{className:"text-gray-500 mb-6 text-sm sm:text-base",children:"Create your first category to organize your inventory"}),m.jsxs(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!0),className:"btn-primary",children:[m.jsx(p,{className:"w-4 h-4 mr-2"}),"Create First Category"]})]})]})]})}export{T as default};
